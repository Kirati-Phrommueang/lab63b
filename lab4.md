# การทดลองที่4 การเขียนโปรแกรมอินพุตสัญญาณดิจิตอล

## วัตถุประสงค์
* 1.ทดสอบการทำงานของโปรแกรมอินพุตสัญญาณดิจิตอล
* 2.ทดสอบการทำงานของเซนเซอร์แสง

## อุปกรณ์
* 1.ไมโครคอนโทรเลอร์ ESP01
* 2.ซีเรียลพอร์ตUSB
* 3.คอมพิวเตอร์
* 4.สายแปลงUSB
* 5.อะแดปเตอร์
* 6.เซ็นเซอร์แสง
* 7.ตัวต้านทาน

## ศึกษาข้อมูลเบื้องต้น
* 1.ศึกษาข้อมูลของไมโครคอนโทรเลอร์ที่ใช้(https://docs.platformio.org/en/latest/boards/espressif8266/esp01_1m.html)
* 2.ศึกษาโค้ดของโปรแกรมที่ต้องการรันบนไมโครคอนโทรเลอร์(https://github.com/choompol-boonmee/lab63b/blob/master/examples/04_Input-Port/src/main.cpp)


## วิธีการทำการทดลอง
* 1.เชื่อมต่อสายแปลงUSBด้านหนึ่งเข้ากับคอมพิวเตอร์และอีกด้านเข้ากับซีเรียล
* 2.ต่ออะแดปเตอร์เข้ากับซีเรียล
* 3.ต่อไมโครคอนโทรเลอร์เข้ากับอะแดปเตอร์
* 4.เรียกโฟรเดอร์ที่เราบันทึกโปรแกรมเก็บไว้ โดยในการทดลองนี้โปรแกรมของเราอยู่ในโฟรเดอร์pattani โดยใช้คำสั่ง'cd pattani'
* 5.เรียกโปรแกรมที่เราต้องการ โดยในการทดลองนี้เราจะใช้โปรแกรมที่1ในโฟรเดอร์pattani โดยใช้คำสั่ง'cd 04_Input-Port'
* 6.รันโปรแกรมลงบนไมโครคอนโทรเลอร์ โดยใช้คำสั่ง'pio run -t uplond'
* 7.ขณะรันโปรแกรมให้กดปุ่มสีดำก่อนแล้วกดปุ่มสีแดงบนซีเรียล
* 8.จากนั้นทดสอบโปรแกรมที่รันสำเร็จ โดยใช้คำสั่ง'pio device monitor'
* 9.ทดลองนำสายสีขาว(พอร์ต0)มาสัมผัสกับสายสีดำ(พอร์ต0)และสัมผัสกับสายสีแดง(พอร์ต1)
* 10.ทดลองกดปุ่มสีดำของซีเรียล
* 11.นำเซ็นเซอร์แสงต่อเข้ากับอะแดปเตอร์ โดยต่อขาด้านหนึ่งของตัวต้านทานและด้านหนึ่งต่อเข้ากับเซ็นเซอร์เข้ากับพอร์ตสายสีแดง นำขาอีกด้านของต้วต้านทานและเซ็นเซอร์แสงต่อเข้ากับพอร์ตตรงกลางระหว่างพอร์ตสายสีแดงและดำ และนำขาอีกด้านของเซ็นเซอร์แสงต่อเข้ากับพอร์ตสายสีดำ(พอร์ต0)
* 12.นำสายสีขาวมาต่อเข้ากับพอร์ตที่ทำการต่อขาของตัวต้านทานและเซ็นเซอร์แสง
* 13.ทดลองบังแสงที่เซ็นเซอร์และให้แสงกับเซ็นเซอร์


## การบันทึกผลการทดลอง
* เมื่อไมโครคอนโทรเลอร์รันโปรแกรมสำเร็จ ได้ผลดังนี้
* ผลการทำงานของโปรแกรมที่รันสำเร็จ ได้ผลดังนี้
* ผลการทดลองนำสายสีขาว(พอร์ต0)มาสัมผัสกับสายสีดำ(พอร์ต0)
* ผลการทดลองนำสายสีขาว(พอร์ต0)มาสัมผัสกับสายสีแดง(พอร์ต1)
* ผลการทดลองกดปุ่มสีดำของซีเรียล
* ผลการทำงานของเซ็นเซอร์เมื่อบังแสงที่เซ็นเซอร์และให้แสงกับเซ็นเซอร์
* ผลการทำงานของเซ็นเซอร์เมื่อให้แสงกับเซ็นเซอร์

## อภิปรายผลการทดลอง
จากการผลการทดลองแสดงให้เห็นว่าโปรแกรมอินพุตสัญญาณดิจิตอลที่ทำการรันบนไมโครคอนโทรเลอร์สามารถใช้งานได้ จากผลการทดลองจะเห็นว่า เมื่อทำการทดสอบโปรแกรมที่รันสำเร๊จโดยการนำสายสีขาว(พอร์ต0)มาสัมผัสกับสายดีดำ(พอร์ต0)เราจะเห็นไฟLEDสว่างขึ้นและมีสถานะเป็น0 แต่เมื่อนำสายสีขาว(พอร์ต0)มาสัมผัสกับสายสีแดง(พอร์ต1)เราจะไม่เห็นไฟLEDสว่างขึ้นและมีสถานะเป็น1 และเมื่อเรากดปุ่มสีดำบนซีเรียลเราจะเห็นไฟLEDสว่างขึ้นและมีสถานะเป็น0 แต่เมื่อเรากดปุ่มสีแดงบนซีเรียลเราจะไม่เห็นไฟLEDสว่างขึ้นและมีสถานะเป็น1 จากนั้นเมื่อเราทำการต่อเซ็นเซอร์แสงเมื่อเราบังแสงที่เซ็นเซอร์ไฟLEDจะไม่สว่าง แต่เมื่อเราไม่บังแสงที่เซ็นเซอร์ไฟLEDจะสว่างขึ้น เนื่องจากโปรแกรมจะรับอินพุตเข้ามาที่พอร์ต0 เมื่ออินพุตที่รับมามีค่าเป็น1โปรแกรมจะส่งเอาต์พุตLOWไปยังพอร์ต2ทำให้ไฟLEDไม่สว่างขึ้นหรือดับลง แต่เมื่ออินพุตที่รับมามีค่าเท่ากับ0โปรแกรมจะส่งเอาต์พุตHIGHไปยังพอร์ต2ทำให้ไฟLEDสว่างขึ้น

## คำถามหลังการทดลอง



