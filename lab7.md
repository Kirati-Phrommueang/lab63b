# การทดลองที่7 โปรแกรมค้นหาไวไฟและเอาต์พุตของสํญญาณ

## วัตถุประสงค์
* 1.ศึกษาวิธีการเขียนโปรแกรมเพื่อรันบนไมโครคอนโทรเลอร์
* 2.ทดสอบการทำงานของโปรแกรมค้นหาไวไฟและโปรแกรมเอาต์พุตสัญญาณดิจิตอล
* 3.ทดสอบการทำงานของรีเลย์
* 4.ประยุกใช้งานโปรแกรมเข้ากับรีเลย์

## อุปกรณ์
* 1.คอมพิวเตอร์
* 2.สายแปลงUSB
* 3.ไมโครคอนโทรเลอร์ ESP01
* 4.ซีเรียลพอร์ตUSB
* 5.อะแดปเตอร์
* 6.รีเลย์


## ศึกษาข้อมูลเบื้องต้น
* 1.ศึกษาข้อมูลของไมโครคอนโทรเลอร์ที่ใช้(https://docs.platformio.org/en/latest/boards/espressif8266/esp01_1m.html)
* 2.ศึกษาโค้ดของโปรแกรมที่ต้องการรันบนไมโครคอนโทรเลอร์(https://github.com/Kirati-Phrommueang/lab63b/blob/main/main.cpp)
* 3.หลักการทำงานของรีเลย์(https://mall.factomart.com/structure-and-principle-of-general-relay/)

## วิธีทำการทดลอง
* 1.เชื่อมต่อสายแปลงUSBด้านหนึ่งเข้ากับคอมพิวเตอร์และอีกด้านเข้ากับซีเรียล
* 2.ต่ออะแดปเตอร์เข้ากับซีเรียล
* 3.ต่อไมโครคอนโทรเลอร์เข้ากับอะแดปเตอร์
* 4.เรียกโฟรเดอร์ที่เราบันทึกโปรแกรมเก็บไว้ โดยใช้คำสั่ง'cd ชื่อของโฟรเดอร์'
* 5.เรียกโปรแกรมที่เราต้องการ โดยใช้คำสั่ง'cd ชื่อของโปรแกรม'
* 6.รันโปรแกรมลงบนไมโครคอนโทรเลอร์ โดยใช้คำสั่ง'pio run -t uplond'
* 7.ขณะรันโปรแกรมให้กดปุ่มสีดำก่อนแล้วกดปุ่มสีแดงบนซีเรียล
* 8.จากนั้นทดสอบโปรแกรมที่รันสำเร็จ โดยใช้คำสั่ง'pio device monitor'
* 9.นำไมโครคอนโทรเลอร์ที่ลงโปรแกรมสำเร็จต่อเข้ารีเลย์
* 10.นำรีเลย์ต่อเข้ากับสายแปลงUSB

## การบันทึกผลการทดลอง
* ไมโครคอนโทรเลอร์ที่รันโปรแกรมสำเร็จ
* ผลการทดสอบโปรแกรมที่รันสำเร็จ
* ผลการทดสอบการทำงานของโปรแกรมบนรีเลย์
## อภิปรายผลการทดลอง
* ผลการทดลองที่คาดหวัง
โปรแกรมค้าหาไวไฟและโปรแกรมสัญญาณเอาต์พุตดิจิตอลที่ทำการรันบนไมโครคอนโทรเลอร์สามารถใช้งานได้ โดยเมื่อโปรแกรมค้นหาไวไฟทำงานและค้นหาไวไฟสำเร็จไฟLEDบนรีเลย์จะสว่างขึ้นและข้อมูลของไวไฟที่ทำการค้นหาได้จะปรากฎขึ้น แต่เมื่อโปรแกรมค้นหาไวไฟค้นหาไวไฟไม่สำเร็จไฟLEDบนรีเลย์จะไม่สว่างขึ้น เนื่องจากเมื่อโปรแกรมค้นหาไวไฟทำงานและค้นหาไวไฟสำเร็จ จำนวนไวไฟที่ค้นหาได้จะไม่เท่ากับ0 จากนั้นจำนวนไวไฟที่ค้นหาได้จะถูกส่งต่อไปยังโปรแกรมเอาต์พุตสัญญาณดิจิตอลและกลายเป็นค่าที่นำมาใช้ต่อในการหาค่าเอาต์พุตของโปรแกรมออกมา ซึ่งเมื่อจำนวนไวไฟที่จากโปรแกรมค้นหาไวไฟมีค่าไม่เท่ากับ0 แล้วโปรแกรมเอาต์พุตสัญญาณดิจิตอลจะให้เอาต์เป็น HIGH ไปยังพอร์ต0ทำให้LEDสว่างขึ้นและแสดงสถานะเป็นON แต่เมื่อโปรแกรมค้นหาไวไฟไม่สำเร็จ จำนวนไวไฟที่ค้นหาได้จะมีค่าเท่า0 จากนั้นจำนวนไวไฟที่ค้นหาได้จะถูกส่งต่อไปยังโปรแกรมเอาต์พุตสัญญาณดิจิตอลและกลายเป็นค่าที่นำมาใช้ต่อในการหาค่าเอาต์พุตของโปรแกรมออกมา ซึ่งเมื่อจำนวนไวไฟที่จากโปรแกรมค้นหาไวไฟมีค่าเท่ากับ0 แล้วโปรแกรมเอาต์พุตสัญญาณดิจิตอลจะให้เอาต์เป็น LOW ไปยังพอร์ต0ทำให้LEDไม่สว่างขึ้น และเมื่อนำไมโครคอนโทรเลอร์ที่รันโปรแกรมสำเร็จไปเชื่อมต่อกับรีเลย์ โดยผลที่ได้เมื่อโปรแกรมค้นหาไวไฟทำงานและค้นหาไวไฟสำเร็จไฟLEDบนรีเลย์จะสว่างขึ้น แต่เมื่อโปรแกรมค้นหาไวไฟค้นหาไวไฟไม่สำเร็จไฟLEDบนรีเลย์จะไม่สว่างขึ้น เนื่องจากโปรแกรมจะส่งเอาต์พุตไปยังรีเลย์เพื่อควบคุมรีเลย์ให้เปิดปิด จากผลการทดลองเราสามารถนำไปประยุกต์ใช้งานในอุปกรณ์ที่มีการใช้งานไวไฟได้
## คำถามหลังการทดลอง
